pipeline {
    agent any

    stages {
        stage('Op-5010490y-S1') {
            steps {
                script {
                    echo "Op-S1-5010490y: Starting QA backup and update process"

                    // Remove old QA backup image if it exists
                    sh '''
                    if docker images | grep -q qa_bkup_image; then
                        docker rmi -f qa_bkup_image
                        echo "Old QA backup image removed"
                    else
                        echo "No existing QA backup image found"
                    fi
                    '''

                    // Create new QA backup image
                    sh '''
                    docker commit 5010490y-qa-svr qa_bkup_image
                    echo "New QA backup image created"
                    '''

                    // Run Bolt script to update index.html
                    sh '''
                    bolt script run /path/to/5010490y_script \
                        --targets 5010490y-qa-svr.localdomain \
                        --no-host-key-check
                    '''

                    echo "Op-S1-5010490y: QA web server is backup and updated"
                }
            }
        }
        stage('Build') {
            steps {
                echo 'ğŸ—ï¸ Build stage: compiling or preparing artifacts...'
            }
        }
        stage('Deploy') {
            steps {
                echo 'ğŸš€ Deploy stage: simulating deployment...'
            }
        }
        stage('Configure') {
            steps {
                echo 'âš™ï¸ Configure stage: applying configuration...'
            }
        }
        stage('Monitor') {
            steps {
                echo 'ğŸ“ˆ Monitor stage: checking system health...'
            }
        }
        stage('Validate') {
            steps {
                echo 'âœ… Validate stage: confirming everything works!'
            }
        }
 }   
}
